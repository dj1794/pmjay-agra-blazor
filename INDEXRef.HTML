<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ayushman Bharat PMJAY Data - District Agra</title>

<style>
body {
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    padding:20px;
}

.header {
    display:flex;
    align-items:center;
    gap:20px;
    margin-bottom:10px;
}

.header img {
    height:70px;
}

h2, h4 {
    text-align:center;
    margin:4px 0;
}

.filters {
    background:#fff;
    padding:15px;
    border-radius:6px;
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:12px;
    margin-bottom:15px;
}

.filter-group {
    display:flex;
    flex-direction:column;
}

.filter-group label {
    font-size:12px;
    font-weight:bold;
    margin-bottom:4px;
}

.filter-group input, .filter-group select {
    padding:7px;
    font-size:13px;
}

.summary {
    display:flex;
    gap:15px;
    margin-bottom:15px;
}

.card {
    flex:1;
    background:#fff;
    padding:12px;
    border-radius:6px;
    text-align:center;
    box-shadow:0 1px 4px rgba(0,0,0,0.1);
}

.card b {
    font-size:18px;
    color:#007bff;
}

.actions {
    text-align:right;
    margin-bottom:10px;
}

button {
    padding:8px 12px;
    border:none;
    border-radius:4px;
    cursor:pointer;
    color:#fff;
}

.download { background:#28a745; }
.print { background:#6c757d; }

table {
    width:100%;
    border-collapse:collapse;
    background:#fff;
    font-size:12px;
}

th, td {
    border:1px solid #ccc;
    padding:6px;
}

th {
    background:#007bff;
    color:#fff;
    position:sticky;
    top:0;
}

tr:nth-child(even) {
    background:#f2f2f2;
}

/* PRINT */
@media print {
    .filters, .actions { display:none; }
    body { background:white; }
    th { background:#ddd !important; color:black !important; }
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/55/Emblem_of_India.svg">
    <img src="https://mera.pmjay.gov.in/images/logo.png">
</div>

<h2>Ayushman Bharat â€“ PMJAY Data</h2>
<h4>District Agra</h4>

<!-- FILTERS -->
<div class="filters">

    <div class="filter-group">
        <label>Search (Name / Family ID)</label>
        <input id="search">
    </div>

    <div class="filter-group">
        <label>District</label>
        <select id="district">
            <option value="">All</option>
            <option>Agra</option>
        </select>
    </div>

    <div class="filter-group">
        <label>Block</label>
        <select id="block">
            <option value="">All</option>
            <option>Etmadpur</option>
            <option>Sadar</option>
            <option>MCORP</option>

        </select>
    </div>

        <div class="filter-group">
        <label>Village / Ward</label>
        <select id="ru">
            <option value="">All</option>
            <option>VILLAGE 1</option>
            <option>VILLAGE 2</option>
        </select>
    </div>
    <div class="filter-group">
        <label>Rural / Urban</label>
        <select id="ru">
            <option value="">All</option>
            <option>RURAL</option>
            <option>URBAN</option>
        </select>
    </div>

    <div class="filter-group">
        <label>Source Type</label>
        <select id="source">
            <option value="">All</option>
            <option>SECC</option>
            <option>TPHH</option>
 <option>MMJAA</option>
 <option>STPHH</option>
 <option>BOCW</option>
        </select>
    </div>

    <div class="filter-group">
        <label>Member Status</label>
        <select id="mstatus">
            <option value="">All</option>
            <option>Approved</option>
            <option>Disabled</option>
            <option>Pending</option>
        </select>
    </div>
</div>

<!-- SUMMARY -->
<div class="summary">
    <div class="card">Total Families<br><b id="tf">0</b></div>
    <div class="card">Total Members<br><b id="tm">0</b></div>
    <div class="card">Covered Members<br><b id="am">0</b></div>
    <div class="card">Covered Families<br><b id="af">0</b></div>
</div>

<div class="actions">
    <button class="download" onclick="exportExcel()">Download Excel</button>
    <button class="print" onclick="window.print()">Print</button>
</div>

<!-- TABLE -->
<table id="table">
<thead>
<tr>
    <th>Family ID</th>
    <th>Member ID</th>
    <th>Name</th>
    <th>Relation</th>
    <th>Guardian</th>
    <th>R/U</th>
    <th>District</th>
    <th>Block</th>
    <th>Village</th>
    <th>Source</th>
    <th>Member Status</th>
    <th>Family Status</th>
</tr>
</thead>
<tbody>
<tr>
    <td>FAM001</td>
    <td>MEM001</td>
    <td>Ramesh Kumar</td>
    <td>Self</td>
    <td>Shyam Kumar</td>
    <td>RURAL</td>
    <td>Agra</td>
    <td>Etmadpur</td>
    <td>XYZ</td>
    <td>SECC</td>
    <td>ACTIVE</td>
    <td>ACTIVE</td>
</tr>
</tbody>
</table>

<script>
const inputs = document.querySelectorAll("input, select");
inputs.forEach(i => i.addEventListener("input", filter));

function filter() {
    let rows = document.querySelectorAll("#table tbody tr");
    let families = new Set(), afam = new Set();
    let tm=0, am=0;

    rows.forEach(r => {
        let show = true;
        let t = r.innerText.toLowerCase();

        if (search.value && !t.includes(search.value.toLowerCase())) show=false;
        if (district.value && r.cells[6].innerText!==district.value) show=false;
        if (block.value && r.cells[7].innerText!==block.value) show=false;
        if (village.value && !r.cells[8].innerText.toLowerCase().includes(village.value.toLowerCase())) show=false;
        if (ru.value && r.cells[5].innerText!==ru.value) show=false;
        if (source.value && r.cells[9].innerText!==source.value) show=false;
        if (mstatus.value && r.cells[10].innerText!==mstatus.value) show=false;
        if (fstatus.value && r.cells[11].innerText!==fstatus.value) show=false;

        r.style.display = show ? "" : "none";

        if(show){
            families.add(r.cells[0].innerText);
            tm++;
            if(r.cells[10].innerText==="ACTIVE") am++;
            if(r.cells[11].innerText==="ACTIVE") afam.add(r.cells[0].innerText);
        }
    });

    tf.innerText=families.size;
    tmElem.innerText=tm;
    amElem.innerText=am;
    af.innerText=afam.size;
}

const tmElem=document.getElementById("tm");
const amElem=document.getElementById("am");

filter();

function exportExcel(){
    let csv=[];
    document.querySelectorAll("table tr").forEach(r=>{
        if(r.style.display==="none") return;
        let c=[...r.children].map(d=>`"${d.innerText}"`);
        csv.push(c.join(","));
    });
    let a=document.createElement("a");
    a.href=URL.createObjectURL(new Blob([csv.join("\n")],{type:"text/csv"}));
    a.download="PMJAY_Agra_Data.csv";
    a.click();
}
</script>

</body>
</html>
